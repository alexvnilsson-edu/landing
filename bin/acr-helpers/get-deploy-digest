#!/bin/bash
set -e
trap 'last_command=$current_command; current_command=$BASH_COMMAND' DEBUG
trap 'echo "\"${last_command}\" command filed with exit code $?."' EXIT

lf=$(<"${1}")

lastline=$(echo "${lf}" | tail -n 1)

re_str='\w+: digest: ([A-z0-9]{0,10}:[0-9a-f]+)'

if [[ $lastline =~ $re_str ]]; then
    r_dig="${BASH_REMATCH[1]}"
else
    exit 1
fi

echo "${r_dig}"
exit 0